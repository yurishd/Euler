#include <iostream>
#include <vector>
#include <iterator>
#include <algorithm>

using namespace std;
long const MAX_DIG_N = 10000000;
void build_digit_numbers(vector<long>&, long MaxN);
long digit(long digitIndex, vector<long> const &digit_numbers);

int main(int argc, char *argv[])
{
  long result = 0;
  vector<long> digitN;
  build_digit_numbers(digitN, MAX_DIG_N);

  copy(digitN.begin(),
       digitN.end(), ostream_iterator<long>(cout, "\n"));
  


  cout << "==========" << endl;

  cout 
    << digit(1, digitN) << ", "
    << digit(9, digitN) << ", "
    << digit(10, digitN) << ", "
    << digit(188, digitN) << ", "
    << digit(189, digitN) << ", "
    << digit(190, digitN) << ", "
    << digit(191, digitN) << ", "
    << digit(2889, digitN) << ", "

    //<< digit(191, digitN) << ", "
    << endl;
  /*
  result = 
    digit(1, digitN)*
    digit(1, digitN)*
    digit(1, digitN)*
    digit(1, digitN)*
    digit(1, digitN)*
    digit(1, digitN)*
    digit(1, digitN);
  cout << result << endl;
  */
  return 0;
}

void build_digit_numbers(vector<long> &digitsN, long MaxN)
{
  long tenth = 10;
  long round = 1;
  for (long i = 1; i < MaxN+1; ++i) {
    if (i == tenth) {
      digitsN.push_back((i - tenth/10) * round);
      tenth *= 10;
      ++round;
    }
  }
}

long digit(long digitIndex, vector<long> const &digit_numbers)
{
  long TheNumber = 0;
  if (0 == digitIndex) return -1;
  for (size_t i = 0; i < digit_numbers.size(); ++i) {
    cout << "digitIndex: " << digitIndex
         << ", digit_numbers[i] :" << digit_numbers[i]
         << endl;
    if (digitIndex <= digit_numbers[i]) {
      cout << "digitIndex: " << digitIndex
           << ", digit_numbers[i] :" << digit_numbers[i]
           << ", (i+1): " << (i+1)
           << ",digitIndex/(i+1) :" << digitIndex/(i+1)
           << endl;
 
      //--TheNumber;
      //digitIndex -= 1;
      TheNumber = TheNumber + digitIndex/(i+1);
      cout << "TheNumber: " << TheNumber
           << endl;
      if (i > 0) {
        digitIndex = (digitIndex - 1) % (i+1);
      } else {
        digitIndex = 0;
      }
      cout << "digitIndex: " << digitIndex
           << endl;
      while (i - digitIndex > 0) {
        TheNumber /= 10;
        ++digitIndex;
      }
      cout << "RetValue: " << TheNumber % 10 << endl;
      return TheNumber % 10;
    } else {
      digitIndex -= digit_numbers[i];
      TheNumber += digit_numbers[i] / (i+1);
    }
  }
  return -1;
}
